# CPP OpenCV Linux
Run, Debug and make OpenCV C++ Project on ubuntu 20.04 0-100%

1-installing vscode:
========================
$sudo apt update
$sudo apt install software-properties-common apt-transport-https wget

$wget -q https://packages.microsoft.com/keys/microsoft.asc -O- | sudo apt-key add -

$sudo add-apt-repository "deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main"

$sudo apt update
$sudo apt install code

install c++ extention tools on vscode
(if you need then install cmake tools on vscode)

2-installing opencv:
=======================
$sudo apt-get update

$sudo apt-get upgrade

$sudo apt-get install cmake

$sudo add-apt-repository "deb http://security.ubuntu.com/ubuntu xenial-security main"

$sudo apt update

$sudo apt-get install build-essential libgtk2.0-dev libavcodec-dev libavformat-dev libjpeg.dev libtiff4.dev libswscale-dev libjasper-dev libopencv-dev


$wget -O opencv.zip https://github.com/opencv/opencv/archive/master.zip

$unzip opencv.zip

$mv opencv-master opencv

$cd opencv/

$mkdir release && cd release

$sudo apt-get install qtbase5-dev

$sudo apt-get install qtdeclarative5-dev

$cmake -DCMAKE_BUILD_TYPE=RELEASE -DCMAKE_INSTALL_PREFIX=/usr/local -DFORCE_VTK=ON -DWITH_TBB=ON -DWITH_V4L=ON -DWITH_QT=ON -DWITH_OPENGL=ON -DWITH_CUBLAS=ON -DCUDA_NVCC_FLAGS="-D_FORCE_INLINES" -DWITH_GDAL=ON -DWITH_XINE=ON -DBUILD_EXAMPLES=ON ..

$sudo make

$sudo make install

3-config opencv:
=================
finding path of ibopencv_dnn.so.4.5 ($ sudo apt install mlocate)

$locate libopencv_dnn.so.4.5

=>

/home/erfan/opencv/release/lib/libopencv_dnn.so.4.5

/home/erfan/opencv/release/lib/libopencv_dnn.so.4.5.3

/usr/local/lib/libopencv_dnn.so.4.5

/usr/local/lib/libopencv_dnn.so.4.5.3

add paths (/usr/local/lib  and  /home/erfan/opencv/release/lib) to /etc/ld.so.conf.d/opencv.conf

by this :

$sudo /bin/bash -c 'echo "/usr/local/lib" > /etc/ld.so.conf.d/opencv.conf'

$sudo /bin/bash -c 'echo "/home/erfan/opencv/release/lib" > /etc/ld.so.conf.d/opencv.conf'

$sudo ldconfig -v

4-debug opencv project:
===========================
In vs code, go to Run And Debug (Ctrl+Shift+D).
Then Click on "create a launch.json file".
then select "C++ (GDB/LLDB)".
then select g++ (compiler: /usr/bin/g++).
then Ctrl+Shift+P then type: "edit conf..." so we see C/C++: Edit Configurations(JSON) and select it.


Edit json files in vscode : (c_cpp_properties.json and launch.json and tasks.json)
----------------
c_cpp_properties.json:
```json
{
    "configurations": [
        {
            "name": "Linux",
            "includePath": [
                "${workspaceFolder}/**",
                "/usr/include",
                "/usr/local/include/opencv4"
            ],
            "defines": [],
            "compilerPath": "/usr/bin/gcc",
            "cStandard": "gnu17",
            "cppStandard": "gnu++14",
            "intelliSenseMode": "linux-gcc-x64",
            "configurationProvider": "ms-vscode.cmake-tools"
        }
    ],
    "version": 4
}
```

launch.json:
```json
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "g++ - Build and debug active file",
            "type": "cppdbg",
            "request": "launch",
            "program": "${fileDirname}/${fileBasenameNoExtension}",
            "args": [],
            "stopAtEntry": false,
            "cwd": "${fileDirname}",
            "environment": [],
            "externalConsole": false,
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                }
            ],
            "preLaunchTask": "C/C++: g++ build active file",
            "miDebuggerPath": "/usr/bin/gdb"
        }
    ]
}
```

tasks.json:
```json
{
    "tasks": [
        {
            "type": "cppbuild",
            "label": "C/C++: g++ build active file",
            "command": "/usr/bin/g++",
            "args": [
                "-g","${workspaceFolder}/${fileBasenameNoExtension}.cpp","-o","${fileBasenameNoExtension}",
                "-I","/usr/include",
                "-I","/usr/include/opencv4",
                "-L","/usr/local/lib/lib*"
            ],
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "detail": "Task generated by Debugger."
        }
    ],
    "version": "2.0.0"
}
```
=========================
